#N canvas 483 206 1986 1189 10;
#N canvas 0 22 600 392 samples 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array sample1 176403 float 0 black black;
#X coords 0 1.02 176402 -1.02 200 130 1;
#X restore 262 41 graph;
#X text 282 385 ------ 4 seconds ------;
#N canvas 0 22 450 300 (subpatch) 0;
#X array sample2 176403 float 0 black black;
#X coords 0 1.02 176402 -1.02 200 130 1;
#X restore 262 226 graph;
#X restore 748 448 pd samples;
#N canvas 52 219 967 340 recorder 0;
#X obj 220 21 inlet;
#X obj 174 174 adc~ 1;
#X obj 174 202 hip~ 5;
#X obj 243 232 line~;
#X obj 174 231 *~;
#X msg 243 204 1;
#X obj 302 169 del 3990;
#X msg 279 204 0 10;
#X obj 174 282 tabwrite~ sample1;
#X msg 26 117 set \$1 \, bang;
#X msg 348 140 stop;
#X msg 302 140 bang;
#X obj 220 50 route record stop reload browse;
#X obj 411 158 loadbang;
#X obj 514 113 openpanel;
#X msg 514 85 bang;
#X text 556 84 <-- browse for samples;
#X text 482 209 v-- re-read original samples;
#X obj 411 295 soundfiler;
#X msg 411 237 read ../sound/bell.aiff sample1 \, read ../sound/voice2.wav
sample2;
#X msg 514 140 read \$1 sample1;
#X obj 514 167 soundfiler;
#X obj 26 88 makefilename sample%d;
#X connect 0 0 12 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 3 0 4 1;
#X connect 4 0 8 0;
#X connect 5 0 3 0;
#X connect 6 0 7 0;
#X connect 7 0 3 0;
#X connect 9 0 8 0;
#X connect 10 0 6 0;
#X connect 11 0 6 0;
#X connect 12 0 11 0;
#X connect 12 0 5 0;
#X connect 12 0 22 0;
#X connect 12 1 7 0;
#X connect 12 1 10 0;
#X connect 12 2 19 0;
#X connect 12 3 15 0;
#X connect 13 0 19 0;
#X connect 14 0 20 0;
#X connect 15 0 14 0;
#X connect 19 0 18 0;
#X connect 20 0 21 0;
#X connect 22 0 9 0;
#X restore 748 635 pd recorder;
#X msg 748 497 record 1;
#X msg 748 553 stop;
#X msg 748 525 record 2;
#X text 26 386 ARGUMENTS FOR NOTES:;
#X text 26 408 pitch in halftones;
#X text 26 432 amplitude (dB);
#X text 26 480 sample number;
#X text 26 456 duration (msec);
#X text 26 504 start location (msec);
#X text 26 528 rise time (msec);
#X text 26 552 decay time (msec);
#X msg 748 580 reload;
#X msg 748 608 browse;
#X obj 504 664 sampvoice;
#X obj 588 368 r note;
#X obj 588 390 unpack 0 0 0 0 0 0 0;
#X obj 561 417 t b f;
#X obj 501 450 f;
#X obj 545 451 + 1;
#X obj 509 487 mod 1e+06;
#X obj 501 516 makenote 64;
#X obj 501 544 poly 8 1;
#X obj 501 571 stripnote;
#X obj 574 613 pack 0 0 0 0 0 0 0 0;
#X obj 574 635 route 1 2 3 4 5 6 7 8;
#X text 746 475 record \, etc.;
#X text 357 544 allocate sampler voice;
#X text 375 571 drop note off again;
#X obj 621 891 qlist;
#X text 619 838 sailors to untie him...;
#X text 619 808 Lashed to the mast of his boat \, Ulysses;
#X text 619 823 hears beautiful singing. He begs his;
#X text 26 577 Here we take the previous patch and make it polyphonic
\, with 8 voices. The single voice which we had before has been made
into an abstraction \, "sampvoice.pd" \, which we instantiate in 8
copies. Earlier we used sends and receives to pass messages to "cutoff"
\, etc \, but here if we did that the copies of sampvoice would be
sending messages to each other \, so we combine the control and the
audio computation in the sampvoice abstraction without using send and
receive. Click on one to see how.;
#X text 26 685 The "poly" object essentially repeats pitch and velocity
pairs to its output \, but also sending a voice number from its left
outlet. To use it \, we unpack the 7 parameters \, calculate the voice
number \, repack the message as 8 parameters with voice number first
\, and use "route" to send it to one of the 8 voices.;
#X text 26 760 There's some bother because poly expects to track note
on and note off messages separately as they would come from a MIDI
keyboard. So we assign each note a unique fake "pitch" \, use makenote
to generate the note-off messages \, and run poly on the resulting
stream. We then discard both pitch and velocity (using the velocity
only to strip note-offs) and rebuild the original message adding the
voice number we just scored.;
#X msg 621 861 read qlist-sampler.txt \, rewind \, tempo 1 \, bang
;
#X text 293 449 increment mod 1e+06 to make tag;
#X text 328 468 (acts like a MIDI pitch to;
#X text 324 487 identify the note to "poly");
#X text 303 516 supply delayed note-off message;
#X obj 504 841 sampvoice;
#X obj 504 816 sampvoice;
#X obj 504 789 sampvoice;
#X obj 504 764 sampvoice;
#X obj 504 739 sampvoice;
#X obj 504 714 sampvoice;
#X obj 504 689 sampvoice;
#X obj 8 349 cnv 15 445 20 empty \$0-pddp.cnv.header polyphonic_sampler
20 10 1 18 -261139 -33289 0;
#X obj 8 935 cnv 15 445 20 empty \$0-pddp.cnv.footer empty 20 12 0
14 -233017 -33289 0;
#N canvas 44 246 494 284 META 0;
#X text 12 105 WEBSITE http://crca.ucsd.edu/~msp/;
#X text 12 85 AUTHOR Miller Puckette;
#X text 12 65 LIBRARY PDDP;
#X text 12 25 LICENSE SIBSD;
#X text 12 125 HELP_PATCH_AUTHORS Updated for release 0.33. Jonathan
Wilkes revised the patch to conform to the PDDP template for Pd version
0.42.;
#X text 12 45 DESCRIPTION polyphonic sampler;
#X text 12 5 KEYWORDS signal tutorial;
#X restore 399 937 pd META;
#N canvas 13 202 428 190 References 0;
#X obj 1 1 cnv 15 425 20 empty \$0-pddp.cnv.subheading empty 3 12 0
14 -261139 -33289 0;
#X text 19 37 links:;
#X text 7 2 polyphonic sampler- Related Help Documents;
#X restore 110 937 pd References;
#X obj 13 937 pddp/pddplink ../5.reference/pddp/help.pd -text help
;
#X obj 672 891 r comment;
#X msg 597 16 60 100 10000 1 0 0 0;
#X obj 597 287 s note;
#X msg 716 227 62;
#X msg 751 227 64;
#X msg 682 227 60;
#X msg 653 227 55;
#X msg 784 227 72;
#X msg 621 227 48;
#X msg 683 270 60.5;
#X msg 597 43 60 90 10000 1 0 0 0;
#X msg 597 70 60 100 10000 2 0 0 0;
#X msg 597 97 60 100 10000 1 3000 0 0;
#X msg 597 151 60 100 100 1 0 0 0;
#X msg 597 178 60 100 100 1 0 0 1000;
#X msg 597 124 60 100 10000 1 0 1000 0;
#X text 720 270 microtones OK too.;
#X obj 494 975 dac~ 1 2 3 4;
#X text 743 16 straight playback;
#X text 743 42 change amplitude;
#X text 743 69 change sample number;
#X text 743 97 change start location;
#X text 743 124 change rise time;
#X text 743 151 change duration;
#X text 742 178 ... and decay time;
#X text 608 206 If you omit values they stay unchanged;
#X obj 1278 117 dsp;
#X obj 1278 85 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 994 272 makenote 1 2000;
#X msg 994 243 4;
#X obj 994 301 pack f f;
#X obj 994 359 pack 0 0 0;
#X obj 994 330 poly 8 1;
#X obj 994 388 print;
#X obj 1186 227 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X msg 1216 287 1;
#X msg 1247 287 0;
#X obj 1186 325 pack f f;
#X msg 1185 287 0;
#X obj 1274 227 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X msg 1304 287 1;
#X msg 1335 287 0;
#X obj 1274 325 pack f f;
#X obj 1369 227 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X msg 1399 287 1;
#X msg 1430 287 0;
#X obj 1369 325 pack f f;
#X obj 1460 226 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X msg 1490 286 1;
#X msg 1521 286 0;
#X obj 1460 324 pack f f;
#X msg 1273 287 1;
#X msg 1368 287 2;
#X msg 1459 286 3;
#X floatatom 1204 520 5 0 0 0 - - -, f 5;
#X obj 1191 468 route 0 1 2 3 4 5 6 7;
#X obj 1186 247 sel 0 1;
#X obj 1274 247 sel 0 1;
#X obj 1369 247 sel 0 1;
#X obj 1460 246 sel 0 1;
#X msg 1175 519 1;
#X obj 1167 554 poly 4 1;
#X floatatom 1159 595 5 0 0 0 - - -, f 5;
#X floatatom 1193 594 5 0 0 0 - - -, f 5;
#X floatatom 1227 593 5 0 0 0 - - -, f 5;
#X connect 2 0 1 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X connect 13 0 1 0;
#X connect 14 0 1 0;
#X connect 15 0 48 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 17 1 25 2;
#X connect 17 2 22 2;
#X connect 17 2 25 3;
#X connect 17 3 25 4;
#X connect 17 4 25 5;
#X connect 17 5 25 6;
#X connect 17 6 25 7;
#X connect 18 0 19 0;
#X connect 18 1 25 1;
#X connect 19 0 20 0;
#X connect 19 0 22 0;
#X connect 20 0 21 0;
#X connect 21 0 19 1;
#X connect 22 0 23 0;
#X connect 22 1 23 1;
#X connect 23 0 24 0;
#X connect 23 2 24 1;
#X connect 24 0 25 0;
#X connect 25 0 26 0;
#X connect 26 0 15 1;
#X connect 26 1 48 1;
#X connect 26 2 47 1;
#X connect 26 3 46 1;
#X connect 26 4 45 1;
#X connect 26 5 44 1;
#X connect 26 6 43 1;
#X connect 26 7 42 1;
#X connect 37 0 30 0;
#X connect 42 0 71 0;
#X connect 42 0 71 1;
#X connect 42 0 71 2;
#X connect 42 0 71 3;
#X connect 43 0 42 0;
#X connect 44 0 43 0;
#X connect 45 0 44 0;
#X connect 46 0 45 0;
#X connect 47 0 46 0;
#X connect 48 0 47 0;
#X connect 55 0 56 0;
#X connect 57 0 56 0;
#X connect 58 0 56 0;
#X connect 59 0 56 0;
#X connect 60 0 56 0;
#X connect 61 0 56 0;
#X connect 62 0 56 0;
#X connect 63 0 56 0;
#X connect 64 0 56 0;
#X connect 65 0 56 0;
#X connect 66 0 56 0;
#X connect 67 0 56 0;
#X connect 68 0 56 0;
#X connect 69 0 56 0;
#X connect 81 0 80 0;
#X connect 82 0 84 0;
#X connect 82 1 84 1;
#X connect 83 0 82 0;
#X connect 84 0 86 0;
#X connect 85 0 87 0;
#X connect 85 0 109 0;
#X connect 86 0 85 0;
#X connect 86 1 85 1;
#X connect 86 2 85 2;
#X connect 88 0 110 0;
#X connect 89 0 91 1;
#X connect 90 0 91 1;
#X connect 91 0 109 0;
#X connect 92 0 91 0;
#X connect 93 0 111 0;
#X connect 94 0 96 1;
#X connect 95 0 96 1;
#X connect 96 0 109 0;
#X connect 97 0 112 0;
#X connect 98 0 100 1;
#X connect 99 0 100 1;
#X connect 100 0 109 0;
#X connect 101 0 113 0;
#X connect 102 0 104 1;
#X connect 103 0 104 1;
#X connect 104 0 109 0;
#X connect 105 0 96 0;
#X connect 106 0 100 0;
#X connect 107 0 104 0;
#X connect 108 0 115 1;
#X connect 109 0 114 0;
#X connect 109 0 108 0;
#X connect 110 0 92 0;
#X connect 110 0 89 0;
#X connect 110 1 92 0;
#X connect 110 1 90 0;
#X connect 111 0 105 0;
#X connect 111 0 94 0;
#X connect 111 1 105 0;
#X connect 111 1 95 0;
#X connect 112 0 106 0;
#X connect 112 0 98 0;
#X connect 112 1 106 0;
#X connect 112 1 99 0;
#X connect 113 0 107 0;
#X connect 113 0 102 0;
#X connect 113 1 107 0;
#X connect 113 1 103 0;
#X connect 114 0 115 0;
#X connect 115 0 116 0;
#X connect 115 1 117 0;
#X connect 115 2 118 0;
